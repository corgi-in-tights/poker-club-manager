{% include "events/partials/page_navigator.html" with page=page max_page=max_page %}
{% for event in events %}
  <div class="event">
    <h2>{{ event.title }}</h2>
    <p>Starts {{ event.start_date|date:"ha, F j, Y" }}</p>
    <p>Ends {{ event.end_date|date:"F j, Y - h:i a" }}</p>
    {% if request.user.is_authenticated %}
      {% include "events/partials/buttons/rsvp.html" with event=event %}
    {% endif %}
    {% if event.is_active %}
      {% include "events/partials/buttons/check_in.html" with event=event %}
    {% endif %}
    <a href="{% url 'events:detail' event.id %}">View Details</a>
    <button type="button"
            data-url="{{ request.build_absolute_uri|escape }}"
            onclick="copyUrl(this)">Copy URL</button>
  </div>
{% empty %}
  <p>No events available.</p>
{% endfor %}

<script>
function copyUrl(btn) {
    navigator.clipboard.writeText(btn.dataset.url);
}
</script>